# CCD calibration file
# for each spectrograph arm bx,rx,zx with x from 0 to 9
#  several versions of the hardware + firmware (not the version of this file or preproc. software)
#  identified by DATE-OBS-BEGIN,DATE-OBS-END with a compatibility check of CCDNAME,DOSVER,FEEVER
#
# For each amplifier X
# GAINX is in e/ADU
# SATURLEVX is in ADU : the saturation level above which pixels are masked (applied before multiplication by gain)
# CROSSTALKXY is the fraction of X in Y (in ADU/ADU, ie applied before multiplication by gain)
#
# orientation of amps (as seen with ds9)
# C D
# A B
#
#

b1:
  V0:
# cross-talk measured with 'desi_compute_crosstalk -i preproc-b1-00001448.fits -t 100 -m 100000'
# gain measurement described in docdb:2657
    AMPLIFIERS: ABCD
    DETECTOR: itl_4kx4k_02
    DATE-OBS-BEGIN: '20161221'
    DATE-OBS-END: None
    DOSVER: trunk
    FEEVER: v20160312
    EXPTIMEKEY: EXPREQ
    GAINA: 0.587
    GAINB: 0.614
    GAINC: 0.630
    GAIND: 0.615
    SATURLEVA: 200000.0
    SATURLEVB: 200000.0
    SATURLEVC: 200000.0
    SATURLEVD: 200000.0
    CROSSTALKAB: -0.000356444
    CROSSTALKAC: -0.000056833
    CROSSTALKAD: -0.000283667
    CROSSTALKBA: -0.00813
    CROSSTALKBC: -0.000022278
    CROSSTALKBD: -0.000992278
    CROSSTALKCA: -0.000450889
    CROSSTALKCB: -0.000498444
    CROSSTALKCD: -0.000017833
    CROSSTALKDA: 0.00122089
    CROSSTALKDB: 0.00181833
    CROSSTALKDC: -0.00346067
    BIAS: 20170131/bias-b1.fits
    DARK: 20170131/dark-b1.fits

  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM 
r1:
  V0:
# cross-talk measured with 'desi_compute_crosstalk -i preproc-r1-00001502.fits -t 2000 -m 15000'
# cross-talk is allowed to be asymmetric eventhough fit compatible with symmetric cross-talk
# gain measurement described in docdb:2657
# note amplifier A is very noisy, gain no measured, set = 1.726/1.073=1.6 from continuity with amp C, but uncertain
# cross-talk measurement refined with average of exposures 4186-4194 4199-4207 5s HgAr,Ne,Kr,Cd
    AMPLIFIERS: ABCD
    DETECTOR: lbnl_4kx4k_1102_reverse
    DATE-OBS-BEGIN: '20161221'
    DATE-OBS-END: None
    DOSVER: trunk
    FEEVER: v20160312
    EXPTIMEKEY: EXPREQ
    GAINA: 1.6
    GAINB: 1.658
    GAINC: 1.726
    GAIND: 1.723
    SATURLEVA: 20000.0
    SATURLEVB: 20000.0
    SATURLEVC: 20000.0
    SATURLEVD: 20000.0
    CROSSTALKAB: -0.00122222
    CROSSTALKAC: -0.00550767
    CROSSTALKAD: -0.000110667
    CROSSTALKBA: 0.000125778
    CROSSTALKBC: -0.0001015
    CROSSTALKBD: -0.0125171
    CROSSTALKCA: -0.00821194
    CROSSTALKCB: -3.29444e-05
    CROSSTALKCD: -0.0006765
    CROSSTALKDA: 0.00330772
    CROSSTALKDB: -0.00873872
    CROSSTALKDC: -0.000611556
    OVERSCANA: PER_ROW
    OVERSCANB: PER_ROW    
    BIAS: 20170131/bias-r1.fits
    DARK: 20170131/dark-r1.fits

  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM 

z1:
  V0:
# desi_compute_crosstalk -i preproc-z1-00001502.fits -t 1000 -m 10000 
# gain measurement described in docdb:2657
# note amplifier C is very noisy, gain no measured, set = 0.9 , but very uncertain (important non-linearities)
# cross-talk measurement refined with average of exposures 4186-4194 4199-4207 5s HgAr,Ne,Kr,Cd
    AMPLIFIERS: ABCD
    DETECTOR: lbnl_4kx4k_1002_reverse
    DATE-OBS-BEGIN: '20161221'
    DATE-OBS-END: None
    DOSVER: trunk
    FEEVER: v20160312
    EXPTIMEKEY: EXPREQ
    GAINA: 0.970
    GAINB: 0.978
    GAINC: 0.9
    GAIND: 0.626
    SATURLEVA: 200000.0
    SATURLEVB: 200000.0
    SATURLEVC: 200000.0
    SATURLEVD: 200000.0
    CROSSTALKAB: -0.000424056
    CROSSTALKAC: -0.00104778
    CROSSTALKAD: -0.000362667
    CROSSTALKBA: -0.00142061
    CROSSTALKBC: 0.00170606
    CROSSTALKBD: -0.00598039
    CROSSTALKCA: -0.00757122
    CROSSTALKCB: -0.0013215
    CROSSTALKCD: -0.000165
    CROSSTALKDA: -0.00166928
    CROSSTALKDB: -0.00667406
    CROSSTALKDC: -0.000696722
    OVERSCANA: PER_ROW
    OVERSCANC: PER_ROW  
    BIAS: 20170131/bias-z1.fits
    DARK: 20170131/dark-z1.fits
    MASK: 20161221/mask-z1.fits
  V-1:
# old ICS headers
    AMPLIFIERS: '1234'
    DETECTOR: lbnl_4kx4k_1002_reverse
    DATE-OBS-BEGIN: '20161214'
    DATE-OBS-END: '20161214'
    DOSVER: trunk
    FEEVER: v20160312
    EXPTIMEKEY: EXPREQ
    GAIN1: 0.970
    GAIN2: 0.978
    GAIN3: 0.9
    GAIN4: 0.626
    SATURLEV1: 200000.0
    SATURLEV2: 200000.0
    SATURLEV3: 200000.0
    SATURLEV4: 200000.0
    CROSSTALK21: -0.001291
    CROSSTALK23: 0.006252
    CROSSTALK24: -0.012034
    CROSSTALK31: -0.006483
    CROSSTALK32: -0.001206
    CROSSTALK34: -0.000421
    CROSSTALK41: 0.
    CROSSTALK42: -0.002936
    BIAS: 20161214/bias-z1.fits
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM 




#####################################
## DUMMY VALUES FOR SIMULATION TESTS
#####################################

b0:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM       
r0:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM       
z0:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM    
b2:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM       
r2:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM       
z2:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM       
b3:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM       
r3:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM       
z3:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM       
b4:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM       
r4:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM       
z4:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM       
b5:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM       
r5:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM       
z5:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM       
b6:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM       
r6:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM       
z6:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM       
b7:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM       
r7:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM       
z7:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM       
b8:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM       
r8:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM       
z8:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM       
b9:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM       
r9:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM       
z9:
  SIM:
      AMPLIFIERS: '1234'      
      DATE-OBS-BEGIN: '19000101'
      DATE-OBS-END: None  
      DOSVER: SIM
      FEEVER: SIM
      DETECTOR: SIM


